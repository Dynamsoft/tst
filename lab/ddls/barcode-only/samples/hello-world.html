<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamsoft Driver License Scanner - Hello World</title>
    <script src="../dist/ddls.bundle.js"></script>
  </head>

  <body>
    <h1 style="font-size: large">Dynamsoft Driver License Scanner</h1>
    <div id="results"></div>

    <script>
      const resultContainer = document.querySelector("#results");

      // Initialize the Dynamsoft Document Scanner
      const driverLicenseScanner = new Dynamsoft.DriverLicenseScanner({
        license:
          "DLS2eyJoYW5kc2hha2VDb2RlIjoiMjAwMDAwLTEwMzk4OTAwMyIsIm1haW5TZXJ2ZXJVUkwiOiJodHRwczovL21sdHMuZHluYW1zb2Z0LmNvbS8iLCJvcmdhbml6YXRpb25JRCI6IjIwMDAwMCIsInN0YW5kYnlTZXJ2ZXJVUkwiOiJodHRwczovL3NsdHMuZHluYW1zb2Z0LmNvbS8iLCJjaGVja0NvZGUiOjk0NTQ3NzkxMX0=",
        scannerViewConfig: {
          uiPath: "../dist/ddls.ui.html",
        },
        templateFilePath: "../dist/ddls.template.json",
        workflowConfig: {
          captureFrontImage: false,
          captureBackImage: false,
          readBarcode: true,
        },
      });
      (async () => {
        // Launch the scanner and wait for the result
        const result = await driverLicenseScanner.launch();
        console.log(result);

        resultContainer.innerHTML = ""; // Clear placeholder content

        // Clear the result container and display the scanned result
        if (result?.licenseData?.status === 0) {
          Object.entries(result?.licenseData).map(([key, val]) => {
            const div = document.createElement("div");
            div.innerHTML = `<p>${key}: ${JSON.stringify(val)}</p>`;
            resultContainer.append(div);
          });
        } else {
          resultContainer.innerHTML = "<p>No data scanned. Please try again.</p>";
        }
      })();
    </script>
  </body>
</html>
